<div class="max-w-7xl mx-auto px-4 py-8">
  <!-- Filters -->
  <div class="relative z-10 flex flex-wrap items-end gap-4 mb-4">
    <!-- Live search -->
    <input type="search"
           class="w-full sm:w-72 border rounded px-3 py-2"
           placeholder="Search…"
           [formControl]="searchCtrl" />

    <!-- Max price slider -->
    <div class="flex items-center gap-3">
      <label class="text-sm text-gray-600">Max price</label>
      <input type="range"
             [min]="0"
             [max]="priceMax"
             [step]="priceStep"
             class="w-60"
             [formControl]="priceCtrl" />
      <div class="text-sm w-28 text-gray-700">
        {{ priceCtrl.value ? ('≤ ' + (priceCtrl.value | currency: currencyHint)) : 'Any' }}
      </div>
    </div>

    <!-- Clear button -->
    <button type="button"
            class="px-3 py-2 text-sm border rounded"
            (click)="clearFilters()"
            [disabled]="!searchCtrl.value && !priceCtrl.value && !styleCtrl.value">
      Clear
    </button>
  </div>

  <!-- Style filter chips -->
  <div class="relative z-10 flex flex-wrap gap-2 mb-6" *ngIf="allStyles.length">
    <button type="button"
            class="px-3 py-1 text-sm rounded border transition"
            [class.bg-black]="!styleCtrl.value"
            [class.text-white]="!styleCtrl.value"
            (click)="styleCtrl.setValue('')">
      All styles
    </button>

    <button type="button"
            *ngFor="let s of allStyles; trackBy: trackByStr"
            class="px-3 py-1 text-sm rounded border transition"
            [class.bg-black]="styleCtrl.value === s"
            [class.text-white]="styleCtrl.value === s"
            (click)="styleCtrl.setValue(s)">
      {{ s }}
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="py-6 text-gray-500">Loading…</div>

  <!-- Gallery -->
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3" *ngIf="!loading">
    <a *ngFor="let a of items" [routerLink]="['/art', a.slug]" class="block group">
      <img [src]="a.images.thumb || a.images.cover"
           [alt]="a.images.alt"
           loading="lazy"
           class="w-full h-auto rounded shadow-sm group-hover:opacity-90" />

      <div class="mt-2 flex justify-between">
        <div>
          <h3 class="font-medium">{{ a.title }}</h3>
          <p class="text-sm text-gray-500">{{ a.artist }} • {{ a.medium }}</p>
        </div>
        <div class="text-right">
          <p class="font-semibold">{{ a.price | currency:a.currency }}</p>
          <span class="text-xs uppercase" [ngClass]="{
            'text-green-600': a.availability === 'available',
            'text-yellow-600': a.availability === 'reserved',
            'text-gray-500': a.availability === 'sold'
          }">{{ a.availability }}</span>
        </div>
      </div>
    </a>
  </div>
</div>
